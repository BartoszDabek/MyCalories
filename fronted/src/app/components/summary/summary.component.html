<div class="cover-container">
  <div class="center input-wrapper">
    <form class="form-inline">
      <div class="form-group">
        <div class="input-group">
          <input class="form-control" placeholder="yyyy-mm-dd" name="dp" [(ngModel)]="model" ngbDatepicker #d="ngbDatepicker">
          <button class="input-group-addon" (click)="d.toggle()" type="button">
            <img src="http://cdn.mysitemyway.com/icons-watermarks/simple-black/bfa/bfa_calendar/bfa_calendar_simple-black_128x128.png"
              style="width: 1.2rem; height: 1rem; cursor: pointer;" />
          </button>
          <button class="btn btn-primary button-style" (click)="summary()">Calculate</button>
        </div>
      </div>
    </form>
  </div>

  <div class="data-wrapper" *ngIf="dayNoExist()">

    <div class="container">
      <div class="row">
        <div class="col">
          <p>
            Consumed {{dailyCalories.nutritionalValues.calories}} / 2500 kcal
            <ngb-progressbar type="success" [value]="(dailyCalories.nutritionalValues.calories * 100) / 2500"></ngb-progressbar>
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col-sm">
          <p>
            <ngb-progressbar type="info" [value]="(dailyCalories.nutritionalValues.proteins * 100) / 130"></ngb-progressbar>
            Proteins {{dailyCalories.nutritionalValues.proteins}} / 130 g
          </p>
        </div>
        <div class="col-sm">
          <p>
            <ngb-progressbar type="warning" [value]="(dailyCalories.nutritionalValues.fats * 100) / 100"></ngb-progressbar>
            Fats {{dailyCalories.nutritionalValues.fats}} / 100 g
          </p>
        </div>
        <div class="col-sm">
          <p>
            <ngb-progressbar type="violet" [value]="(dailyCalories.nutritionalValues.carbs * 100) / 350"></ngb-progressbar>
            Carbs {{dailyCalories.nutritionalValues.carbs}} / 350 g
          </p>
        </div>
      </div>
    </div>

    <div class="meals-wrapper">
      <ngb-accordion [closeOthers]="true">
        <div *ngFor="let meal of dailyCalories.meals">
          <ngb-panel>
            <ng-template ngbPanelTitle>
              {{meal.name}}
              <div class="meal-nutritional">
                Proteins: {{meal.nutritionalValues.proteins}} g | Fats: {{meal.nutritionalValues.fats}} g | Carbs: {{meal.nutritionalValues.carbs}}
                g | {{meal.nutritionalValues.calories}} kcal
              </div>
            </ng-template>
            <ng-template ngbPanelContent>
              <table class="table table-borderless">
                <thead>
                  <tr>
                    <th class="col-50">Product</th>
                    <th>Amount</th>
                    <th>KCAL</th>
                    <th>Prot.</th>
                    <th>Fats</th>
                    <th>Carbs</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let pm of meal.productMeals">
                    <td class="product-name">{{ pm.product.name }}</td>
                    <td class="binding">{{ pm.amount * 100 }} g</td>
                    <td class="binding">{{ pm.product.nutritionalValues.calories * pm.amount }}</td>
                    <td class="binding">{{ pm.product.nutritionalValues.proteins * pm.amount }}</td>
                    <td class="binding">{{ pm.product.nutritionalValues.fats * pm.amount }}</td>
                    <td class="binding">{{ pm.product.nutritionalValues.carbs * pm.amount }}</td>
                    <td class="binding">
                      <button class="close close-btn" (click)="test(pm)">&times;</button>
                    </td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td colspan="2">
                      <strong class="product-btn" role="button" (click)="newProduct()">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                        Add new product
                      </strong>
                    </td>
                    <td class="bold binding">{{meal.nutritionalValues.calories}}</td>
                    <td class="bold binding">{{meal.nutritionalValues.proteins}}</td>
                    <td class="bold binding">{{meal.nutritionalValues.fats}}</td>
                    <td class="bold binding">{{meal.nutritionalValues.carbs}}</td>
                    <td class="bold binding"></td>
                  </tr>
                </tfoot>
              </table>
            </ng-template>
          </ngb-panel>
        </div>
      </ngb-accordion>
    </div>

  </div>
</div>